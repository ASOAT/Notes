20241227
Status: #project
Tags: [[自动驾驶测试]]
Aliases: 
# 本科毕设开题思考
关键词：交通弱势参与者；挑战指标/挑战场景生成目标；或者用逆向思维来考虑：**自动驾驶决策算法需要使用测试场景完成什么目的？**
*题外话：PPT 内容需要精简*
最终生成的目标在于挑战性和合理性。
# 问题理解
自动驾驶测试场景目前面临的问题主要集中在虚拟测试和真实世界的差异 (Sim 2 Real Gap) 上。从真实性上讲，主要体现在环境上的差异，包括物理模型层面上的差异以及背景交通参与者上的差异，后者在自动驾驶领域更具有研究的价值，包括背景车辆驾驶员行为建模以及**弱势交通参与者（行人、非机动车）行为建模**。从挑战性上来讲，现实世界的挑战场景往往匪夷所思，这意味着想要依靠想象去界定一个场景是非常困难的，**随机性**是生成的关键，将在后文展开讨论。但是这并不意味着依靠人为指定的规则是完全无用的，以比待测系统更高层面的思维考虑场景的生成对于待测系统仍是有效的（例如：利用博弈的思想生成的场景显然是 IDM 无法应对的，在这个角度下，思考什么是比目前的端到端更 next level 的自动驾驶层次）。

*有趣的问题: 测试系统相比于强化学习的训练环境有什么区别？*【20241229 *或许也完全没有必要和训练环境分开*】
强化学习的训练环境可以是针对某一特殊场景制定的，例如高复杂度的多车场景，或者多车交互的十字路口场景，它的目标应该是尽可能地真实，同时整个场景应该保持一致的“风格”。
如果说强化学习的训练环境是为了让自动驾驶学习的解决问题的方法，测试场景的目的应该是发现自动驾驶**还没有学习到**的地方，然后帮助自动驾驶工程师改进训练的方法。*怎么探索到还没有学习到的地方？并且还要说明这样的情况在现实世界中也是有意义的，最好还能帮助说明为什么自动驾驶在这个场景下面会失效。*
风格是一个有趣的话题，对于自动驾驶测试场景而言，*测试中风格的多变有意义吗？*

构建决策窘境；权衡多方安全性；

由于待测系统是一个黑盒系统，因此挑战场景在生成的时候一定要有**具有通性**的定义。

优化方法无法保证生成挑战场景，尤其是存在其他交通参与者动机约束的情况下。考虑这样一种方法：先生成发生冲突的挑战场景，然后利用动机模型对场景进行合理性的筛选。

## 对于原先思路的一些思考
原先的思路作为 Baseline 应该是没有问题的，问题主要在于创新性的切入点和一些细节上的问题。
原先的 Baseline：整个场景是在一个行人密集和非机动车密集的十字路口，交互情况主要出现在行人与非机动车和被测车辆的交互上面。整个挑战场景的思路在于，为自动驾驶车辆制造一个在性能边界上窘迫的局面，因此需要一个指标来描述什么是所谓的窘迫。这个地方我认为的创新点和问题可能主要在于：
1. 考虑了弱势交通参与者，以及由弱势交通参与者所构成的挑战。市面上弱势交通参与者的建模可能有很多，但是怎么样去设计**因为弱势交通参与者之间的意图行为冲突导致我的自动驾驶车辆受阻**，这是一个问题。
2. 生成的测试场景不是极端的，而是有通过的可能的。这里就要思考一个问题，关于性能边界的问题。理论上来说我的指标是根据性能边界来提出的，但是对于一个黑盒的自动驾驶系统，这个性能边界并不是一个很好得出的东西，因此也许需要我通过数据集或者什么之类的，先**得出一个人类驾驶员的通过性能边界**，然后把这个性能边界作为一个 Base 去测试其他的自动驾驶系统。这个地方就有一个界限了，所谓一台机床不能生产比起精度更高的仪器，因此以人类驾驶员的通过性能边界作为 Base 还是有一点问题。
3. 接第二点，对于测试的标准还是具体的测试场景的问题。所谓的测试，或者将其称为评判，首先就需要站在一个比对方高的角度上才有资格。因此整个场景的思路应该就是和这个一致的，所要思考的其实是端到端自动驾驶后续的形态，这个形态目前可以定义为是拟人驾驶，那么可以简单提出几个关键词，比如说是所谓的态势感知或者复杂态势交互或者是个性化等等，因此其实与弱势交通参与者之间的交互是符合这个主题的，因为这是比目前的端到端自动驾驶先进的东西。
4. 那么目前的主题其实就已经可以定义下来了，就是生成一个目前常见的城市市区里面行人密集的这么一个十字路口，具体的细节先不讨论，大致的内容主要包含：行人的建模，非机动车的建模以及行人非机动车之间冲突的建模，比如说是**两个电动车的行车轨迹发生了冲突导致一车的轨迹偏离原始的轨迹**这样的问题。这其实是一个挺有价值的问题，因为不同于两个真正的车辆之间的交互。两个真正的车辆之间的交互由于二者的体型过于庞大所以是缓慢的，但是电动车由于其属性可以很快地改变轨迹，给自动驾驶的预测和规划带来很大的不确定性。再其次就是电动车的横冲直撞，电动车在面临车辆的时候很有可能会先稍微减速，然后马上加速试图抢占通过，自动驾驶对于这一类的行为的预测应该会比较困难*关于这个问题的定义还是需要思考，因为在这一类的情况下自动驾驶肯定是需要停止运行的，哪怕是人类驾驶员也得先停下来，因此称不上是挑战，还是得思考一些自动驾驶目前没有办法思考的东西，就是其他交通参与者之间发生冲突后怎么被影响*。

OK，综上所述，目前的研究的重点还是对一个行人密集的十字路口进行建模，是一种反向推演的方法，既然没有办法直接生成行人的模型，那就按照一个指标来生成可能会令自动驾驶感到头疼的场景. 这个指标的定义主要还是来自于数据集和一些专家知识, 所以本文的工作其实不是对行人的建模, 而是一种行人的代理模型, 这个代理模型的目的就是让自动驾驶难受, 并不包含正常的真实的行人的动机, 但是在这个动机之下的行为至少要是保证自然的.
# 思路
创新点：逆向行人建模；强化学习对抗生成；提出一个指标。
先来说逆向行人建模，这个地方不能把行人作为一个个体，因为我要考虑的是密集的行人流模型，我需要的是一个群体的行为，同样的，发生冲突的两个个体也要视作一个群体，因此需要先对冲突范式进行一个分类。
然后需要考虑指标，就是群体行为为了什么目的来进行发展，或者说是强化学习的指标。如果是强化学习的话感觉直接就是自动驾驶的通过时间吗，如果是这样考虑的话应该会涉及到很多东西，主要是动作空间上的，比如每一种冲突发生的事件，每一个冲突的细节，因此需要思考一种方法能够统筹地表示一下。

## 研究内容
主要包括三个部分：挑战场景定义/建模；场景生成算法开发；挑战场景验证与评估。


## 技术路线







---
# References
## 交通弱势参与者建模

## 挑战场景评估


