20241203
Status: #public-knowledge
Tags: 
# Importance Sampling
当函数在某个区域（如极值点）对积分贡献大，但该区域在原始分布中采样概率极低时，使用重要性采样能解决传统蒙特卡洛方法需要极多样本才能准确估计的痛点。

对于一般分布求期望值：
$$\mathbb{E}[f(x)] = \int f(x) p(x) dx$$
当$p(x)$采样困难（稀疏事件或复杂分布等）时，选择一个重要性分布$q(x)$使期望变为：
$$\mathbb{E}[f(x)] = \int f(x) \frac{p(x)}{q(x)}dx$$
其中，$\omega = \frac{p(x)}{q(x)}$被称为重要性权重，估计期望为：
$$\mathbb{E}[f(X)] = \sum_{i=1}^N f(x_i)\omega_i,\qquad x_i \sim q(x)$$
$q(x)$满足：
$$q(x)\in[0,1],\sum_{x\in\mathbb{X}}q(x)=1,p(x)>0\Rightarrow q(x)>0.$$

## 帮助理解的案例
测量某干旱地区的降雨量，如果只是每天随机测量可能一直测不到下雨，但是如果只在下雨天进行测量，然后根据下雨天的占比进行调整就能获得较为准确的数据。

应用于自动驾驶挑战场景生成，将背景车辆的速度区间从（0，80）调整到（50，80），制造一个更加危险的环境，就能更好地统计事故率。

---
# References
